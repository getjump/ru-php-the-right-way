---
isChild: true
---

## Composer и Packagist {#composer_and_packagist_title}

Composer является **блестящим** менеджером зависимостей для PHP. Укажите список зависимостей вашего проекта в файле `composer.json` и, с помощью нескольких простых команд, Composer автоматически скачает зависимости вашего проекта и установит для вас автозагрузку. 

На данный момент существует много PHP библиотек, которые совместимы с Composer, готовых для использования в вашем проекте. Список этих «пакетов» есть на [Packagist][1], официальном репозитории для Composer-совместимых PHP библиотек. 

### Как установить Composer

Вы можете установить Composer локально (в вашей текущей рабочей директории; хотя это не рекомендуется) или глобально (например /usr/local/bin). Предположим, вы хотите установить Composer локально. Из корневой директории вашего проекта выполните:

    curl -s https://getcomposer.org/installer | php

Это позволит загрузить файл `composer.phar` (бинарный PHP-архив). Вы можете запустить его, используя `php` для управления зависимостями вашего проекта. <strong>Обратите внимание:</strong> Если вы скачаете код напрямую в ваш интерпретатор, пожалуйста, сперва прочитайте код онлайн, для подтверждения его безопасности.

### Как установить Composer (вручную)

Ручная установка Composer &mdash; это продвинутая техника; однако, существуют причины, по которым разработчик может предпочесть именно этот метод использованию интерактивной установки. Интерактивная установка проверяет настройки PHP, чтобы подтвердить, что:

- Используется необходимая версия PHP
- Файлы `.phar` могут быть верно выполнены
- Определенные права на каталог достаточны
- Не установлены конфликтные расширения
- Установлены необходимые настройки `php.ini`

В случае, если ни одно из этих условий не соблюдено, вы должны принять решение стоит ли идти на такой компромисс. Ниже описано, как установить Composer вручную:

    curl -s http://getcomposer.org/composer.phar -o $HOME/local/bin/composer
    chmod +x $HOME/local/bin/composer

Путь `$HOME/local/bin` (или другой каталог, выбранный вами) должен находиться в вашей переменной окружения `$PATH`. Это позволит быть доступной команде `composer`.

Если вы прочтете документацию Composer, которая гласит, что нужно запускать Composer с помощью команды `php composer.phar install`, вы можете заменить эту команду на:

    composer install

### Как объявить и установить зависимости

Composer продолжает следить за зависимостями вашего проекта в файле `composer.json`. Вы можете управлять им вручную, если вам нравится, или же использовать сам Composer. Команда `php composer.phar require` добавляет зависимость в проект и, если в каталоге нет файла `composer.json`, он будет создан. Далее мы рассмотрим пример, который добавляет [Twig][2], как зависимость вашего проекта. Запустите это в корневой директории вашего проекта, куда вы загружали `composer.phar`:

	php composer.phar require twig/twig:~1.8

Аналогично команда `php composer.phar init`	проведет вас через создание полного файла `composer.json` для вашего проекта. Есть и другой путь, когда вы создадите файл `composer.json` вы можете сказать Composer, чтобы он скачал все ваши зависимости в папку `vendors/`. Это также применимо для проектов, которые вы загрузили и которые предоставляют файл `composer.json`:

    php composer.phar install

Затем добавьте этот код в основной PHP-файл вашего приложения; это укажет PHP использовать автозагрузчик Composer для зависимостей вашего проекта.

{% highlight php %}
<?php
require 'vendor/autoload.php';
{% endhighlight %}

Теперь вы можете использовать зависимости вашего проекта и они будут автоматически загружаться (по требованию).

### Обновление зависимостей

Composer создает файл `composer.lock` который хранит точную версию каждого пакета, который он загрузил во время первого запуска `php composer.phar install`. Если вы поделились проектом с другими разработчиками и файл `composer.lock` является частью него, то при запуске `php composer.phar install` они получат ту же версию, что и вы. Чтобы обновить ваши зависимости запустите `php composer.phar update`.

Очень удобно гибко указывать требуемые версии. Если вы нуждаетесь в версии ~1.8, что значит "всё что новее 1.8.0, но меньше 2.0.x-dev". Вы также можете использовать шаблон `*`, например `1.8.*`. Теперь команда Composer `php composer.phar update` обновит все ваши зависимости до новейших версий, которые соответствуют указанным ограничениям.

### Проверка ваших зависимостей на безопасность

[Security Advisories Checker][3] является веб-сервисом и инструментом командной строки, оба из которых изучают ваш файл `composer.lock` и скажут вам если вам нужно обновить любое из ваших зависимостей.

* [Подробнее о Composer][4]

[1]: http://packagist.org/
[2]: http://twig.sensiolabs.org
[3]: https://security.sensiolabs.org/
[4]: http://getcomposer.org/doc/00-intro.md

