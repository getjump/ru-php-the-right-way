---
isChild: true
---

## Дата и время {#date_and_time_title}

PHP содержит встроенный класс DateTime, предназначенный для чтения, записи, сравнения и вычисления даты или времени. Также в PHP много функций, связанных с датой и временем, помимо класса DateTime, но класс предоставляет хороший объектно-ориентированный интерфейс для решения большинства задач. Он способен даже обрабатывать временные зоны, но это уже не рассматривается в данном коротком введении.

Для начала работы с DateTime, сконвертируйте «сырую» строку даты и времени в объект с помощью фабричного метода `createFromFormat()` или выполните `new \DateTime`, чтобы получить текущую дату и время. Используйте метод `format()` для конвертирования DateTime обратно в строку для вывода.
{% highlight php %}
<?php
$raw = '22. 11. 1968';
$start = \DateTime::createFromFormat('d. m. Y', $raw);

echo 'Start date: ' . $start->format('m/d/Y') . "\n";
{% endhighlight %}

Вычисления с DateTime возможны с использованием класса DateInterval. У класса DateTime есть методы `add()` и `sub()`, которые принимают DateInterval, как аргумент. Не пишите код, который ожидает одинаковое число секунд каждый день, перевод часов и смена часовых поясов разрушат это предположение. Вместо этого используйте интервалы дат. Для расчета разницы между датами используйте метод `diff()`. Он вернет новый объект DateInterval, который очень легко отобразить. 
{% highlight php %}
<?php
// создает копию $start и добавляет 1 месяц и 6 дней
$end = clone $start;
$end->add(new \DateInterval('P1M6D'));

$diff = $end->diff($start);
echo 'Difference: ' . $diff->format('%m месяц, %d дней (total: %a дней)') . "\n";
// Разница : 1 месяц, 6 дней (всего : 37 дней)
{% endhighlight %}

С объектами DateTime, вы можете использовать стандартные методы сравнения:
{% highlight php %}
<?php
if ($start < $end) {
    echo "Начальная дата раньше конечной!\n";
}
{% endhighlight %}

И последний пример для демонстрации класса DatePeriod. Он используется для перебора повторяющихся событий. Класс может принимать два объекта DateTime, начало и конец, и интервал, для которого он вернет все события между ними.
{% highlight php %}
<?php
// выводит все четверги между началом и концом
$periodInterval = \DateInterval::createFromDateString('first thursday');
$periodIterator = new \DatePeriod($start, $periodInterval, $end, \DatePeriod::EXCLUDE_START_DATE);
foreach ($periodIterator as $date) {
    // вывести каждую дату в периоде
    echo $date->format('m/d/Y') . ' ';
}
{% endhighlight %}

* [Подробнее о DateTime][datetime]
* [Подробнее о форматировании даты][dateformat] (разрешенные опции строки формата даты)

[datetime]: http://www.php.net/manual/ru/book.datetime.php
[dateformat]: http://www.php.net/manual/ru/function.date.php
