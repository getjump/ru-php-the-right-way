---
isChild: true
---

## Исключения {#exceptions_title}

Исключения - это неотъемлимая часть большинства популярных языков программирования, но зачастую PHP разработчики 
не уделяют им особого внимания. Языки подобные Ruby очень подробно обрабатываю исключения, поэтому, когда что-то 
идёт не так как например : HTTP запрос не удался, запрос к базе данных происходит неправильно или если 
изображение не было найдено, Ruby(или используемые гемы) выбросят исключение на экран, дающее понять где вы 
допустили ошибку.


PHP сам по себе, довольно слаб в плане этого и вызов `file_get_contents()`, как правило даст вам только `FALSE` 
и предупреждение. Многие старые PHP фрэймворки, как CodeIgniter, просто вернут false, добавят сообщение в свой
собственный журнал и может быть дадут вам использовать метод, как `$this->upload->get_error()`, чтобы 
посмотреть, что пошло не так. Проблема в том, что вы должны искать ошибку и проверять документацию, чтобы 
понять, какой ошибочный метод существует в этом классе, вместо того, чтобы сделать это всё более очевидным.

Еще одна проблема, в том, что классы автоматически выдают ошибку на экран и закрывают процесс. Когда вы делаете 
это, вы не даете другому разработчику динамически обработать эту ошибку. Исключения должны быть выброшены, 
чтобы дать разработчику знать об ошибке чтобы они могли выбрать, как обработать это. Например:

{% highlight php %}
<?php
$email = new Fuel\Email;
$email->subject('My Subject');
$email->body('How the heck are you?');
$email->to('guy@example.com', 'Some Guy');

try
{
    $email->send();
}
catch(Fuel\Email\ValidationFailedException $e)
{
    // Валидация не удалась
}
catch(Fuel\Email\SendingFailedException $e)
{
    // Драйвер не может отправить сообщение
}
{% endhighlight %}

### Исключения SPL

Универсальный класс `Exception` предоставляет очень мало отладочно контекста дял разработчика; как бы то ни 
было, для того чтобы исправить это, можно создать специализированный класс, который будет расширять 
возможности универсального класса `Exception`:

{% highlight php %}
<?php
class ValidationException extends Exception {}
{% endhighlight %}

Это означает, что вы можете добавить несколько блоков отлова и обрабатывать разные исключения по разному.
Это может привести к созданию <em>множества</em> измененных Исключений, некоторые из которых можно было бы 
избежать, используя Исключения SPL предоставляемые [расширением SPL][splext].

Например если вы используете магический метод `__call()` и вами был вызван неизвестный метод, тогда вместо 
выбрасывания стандартного исключения, которое очень расплывчато, или создания измененного исключения для 
этого, вы можете просто `throw new BadFunctionCallException;`.

* [Подробнее о Исключениях][exceptions]
* [Подробнее о SPL Исключениях][splexe]
* [Вложенные исключения в PHP][nesting-exceptions-in-php]
* [Лучшие практики исключений в PHP 5.3][exception-best-practices53]

[exceptions]: http://php.net/manual/ru/language.exceptions.php
[splexe]: http://php.net/manual/ru/spl.exceptions.php
[splext]: /#standard_php_library
[exception-best-practices53]: http://ralphschindler.com/2010/09/15/exception-best-practices-in-php-5-3
[nesting-exceptions-in-php]: http://www.brandonsavage.net/exceptional-php-nesting-exceptions-in-php/
